# scripts/Makefile  – minimal shim for OpenBench

ENGINE  := Helios
OUT     ?= ./$(ENGINE)           # OpenBench passes this
OUTDIR  := $(dir $(OUT))         # directory part of $(OUT)

all: build copy

build:
	@echo "===> Gradle jpackage"
	./gradlew --no-daemon jpackage        # builds build/jpackage/Helios/Helios/…

copy: build
	@echo "===> Copy full jpackage bundle"
	@mkdir -p "$(OUTDIR)"
	# 1. copy every file (launcher + libs, configs, etc.)
	cp -r build/jpackage/Helios/Helios/* "$(OUTDIR)"
	# 2. make sure the launcher itself has the expected name & is executable
	mv "$(OUTDIR)/Helios" "$(OUT)"
	chmod +x "$(OUT)"
	@echo "===> $(ENGINE) bundle ready in $(OUTDIR)"
